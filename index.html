<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SDGs City Manager Ver4</title>
<style>
/* åŸºæœ¬CSS */
body{font-family:Arial, sans-serif;margin:0;padding:0;background:#f0f0f0;color:#222;text-align:center;}
h1,h2{margin:10px 0;}
.hidden{display:none;}
#city-img{width:90%;max-width:600px;margin:20px auto;display:block;border-radius:8px;}
button{margin:10px;padding:10px 20px;font-size:16px;border:none;border-radius:5px;background:#4CAF50;color:white;cursor:pointer;}
button:hover{background:#45a049;}
#score-bar{margin-top:10px;font-size:18px;}
#choices button{display:block;width:80%;margin:10px auto;}
@media(max-width:600px){button{width:90%;}}
</style>
</head>
<body>

<div id="app">
  <!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
  <div id="title-screen">
    <h1>SDGs City Manager</h1>
    <p>éƒ½å¸‚èª²é¡Œã‚’è§£æ±ºã—ãªãŒã‚‰ã€SDGsã‚’å­¦ã¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ </p>
    <button id="start-btn">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
  </div>

  <!-- å•é¡Œç”»é¢ -->
  <div id="question-screen" class="hidden">
    <h2 id="city-name"></h2>
    <img id="city-img" src="" alt="éƒ½å¸‚ç”»åƒ">
    <h2 id="question-text"></h2>
    <div id="choices"></div>
    <div id="score-bar">ğŸŒ¿<span id="env-score">0</span> ğŸ’°<span id="eco-score">0</span> ğŸ¤<span id="soc-score">0</span></div>
  </div>

  <!-- çµæœç”»é¢ -->
  <div id="result-screen" class="hidden">
    <h2>ã‚²ãƒ¼ãƒ çµæœ</h2>
    <p id="result-text"></p>
    <button id="restart-btn">æœ€åˆã«æˆ»ã‚‹</button>
  </div>
</div>

<!-- JSONãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿ -->
<script id="city-data" type="application/json">
[
  {
    "city_id":"tokyo_future",
    "name":"æ±äº¬ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼ãƒ»ãƒ¡ãƒˆãƒ­",
    "level_images":["images/tokyo_future_lv1.jpg","images/tokyo_future_lv2.jpg","images/tokyo_future_lv3.jpg"],
    "questions":[
      {"q":"é›‡ç”¨æ ¼å·®ãŒæ‹¡å¤§ã—ã¦ã„ã‚‹ã€‚ã©ã†ã™ã‚‹ï¼Ÿ",
       "choices":[
         {"text":"AIæ•™è‚²ã‚’å…¨å›½ç„¡æ–™åŒ–","effect":{"social":2}},
         {"text":"å¤–è³‡ç³»ä¼æ¥­ã®èª˜è‡´","effect":{"economy":2}},
         {"text":"ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚¤ãƒ³ã‚«ãƒ å°å…¥","effect":{"social":1,"economy":-1}}
       ]
      },
      {"q":"éƒ½å¸‚ç†±å•é¡Œã¸ã®å¯¾ç­–ã¯ï¼Ÿ",
       "choices":[
         {"text":"éƒ½å¸‚ç·‘åŒ–ï¼ˆå‚ç›´åº­åœ’ï¼‰","effect":{"environment":3}},
         {"text":"å†·æˆ¿åŠ¹ç‡æ”¹å–„","effect":{"economy":1}},
         {"text":"æ—¥å°„åå°„èˆ—è£…","effect":{"environment":2}}
       ]
      },
      {"q":"ã‚¨ãƒãƒ«ã‚®ãƒ¼é›†ä¸­ãƒªã‚¹ã‚¯ã«å¯¾ã—ã¦ï¼Ÿ",
       "choices":[
         {"text":"åœ°æ–¹åˆ†æ•£é›»æº","effect":{"environment":2,"economy":-1}},
         {"text":"AIæœ€é©åˆ¶å¾¡","effect":{"economy":2,"environment":1}},
         {"text":"å†ã‚¨ãƒæŠ•è³‡ãƒ•ã‚¡ãƒ³ãƒ‰è¨­ç«‹","effect":{"economy":1,"social":1}}
       ]
      }
    ]
  },
  {
    "city_id":"rio_ocean",
    "name":"ãƒªã‚ªãƒ»ã‚ªãƒ¼ã‚·ãƒ£ãƒ³ãƒ•ãƒ­ãƒ³ãƒˆ",
    "level_images":["images/rio_ocean_lv1.jpg","images/rio_ocean_lv2.jpg","images/rio_ocean_lv3.jpg"],
    "questions":[
      {"q":"å¡©å®³ã§ä½å®…ãŒåŠ£åŒ–ã€‚ã©ã†ã™ã‚‹ï¼Ÿ",
       "choices":[
         {"text":"è€å¡©ç´ æã®æ¡ç”¨","effect":{"economy":-1,"environment":2}},
         {"text":"å®šæœŸç‚¹æ¤œãƒ­ãƒœãƒƒãƒˆå°å…¥","effect":{"economy":1}},
         {"text":"æµ·ä¸Šä½å®…ã‚’å†…é™¸ã¸ç§»è¨­","effect":{"environment":1,"social":1}}
       ]
      },
      {"q":"æµ·æ´‹ãƒ—ãƒ©å¯¾ç­–ã¯ï¼Ÿ",
       "choices":[
         {"text":"å›åAIãƒœãƒ¼ãƒˆé‹ç”¨","effect":{"environment":3}},
         {"text":"ãƒªã‚µã‚¤ã‚¯ãƒ«æ•™è‚²","effect":{"social":2}},
         {"text":"ã”ã¿ç„¼å´ç™ºé›»","effect":{"economy":1,"environment":-1}}
       ]
      },
      {"q":"è¦³å…‰ä¾å­˜çµŒæ¸ˆã‚’ã©ã†å¤šæ§˜åŒ–ã™ã‚‹ï¼Ÿ",
       "choices":[
         {"text":"æ¼æ¥­AIåŒ–","effect":{"economy":2}},
         {"text":"æµ·æ´‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ç ”ç©¶æŠ•è³‡","effect":{"environment":2}},
         {"text":"è¦³å…‰å¢—ç¨","effect":{"economy":1,"social":-1}}
       ]
      }
    ]
  }
  // ä»–éƒ½å¸‚ã‚‚åŒã˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¿½åŠ å¯èƒ½
]
</script>

<script>
// JSå‡¦ç†
const cities = JSON.parse(document.getElementById('city-data').textContent);
let currentCityIndex=0,currentQuestionIndex=0,scores={environment:0,economy:0,social:0};

const titleScreen=document.getElementById('title-screen');
const questionScreen=document.getElementById('question-screen');
const resultScreen=document.getElementById('result-screen');
const startBtn=document.getElementById('start-btn');
const restartBtn=document.getElementById('restart-btn');
const cityImg=document.getElementById('city-img');
const cityName=document.getElementById('city-name');
const questionText=document.getElementById('question-text');
const choicesDiv=document.getElementById('choices');
const envScoreEl=document.getElementById('env-score');
const ecoScoreEl=document.getElementById('eco-score');
const socScoreEl=document.getElementById('soc-score');
const resultText=document.getElementById('result-text');

startBtn.onclick=()=>{titleScreen.classList.add('hidden');questionScreen.classList.remove('hidden');showQuestion();};
restartBtn.onclick=()=>location.reload();

function showQuestion(){
  const city=cities[currentCityIndex];
  const question=city.questions[currentQuestionIndex];
  const level=Math.min(currentQuestionIndex,city.level_images.length-1);
  cityImg.src=city.level_images[level];
  cityName.textContent=city.name + " (Lv"+(level+1)+")";
  questionText.textContent=question.q;
  choicesDiv.innerHTML='';
  question.choices.forEach(choice=>{
    const btn=document.createElement('button');
    btn.textContent=choice.text;
    btn.onclick=()=>selectChoice(choice);
    choicesDiv.appendChild(btn);
  });
  updateScores();
}

function selectChoice(choice){
  scores.environment+=(choice.effect.environment||0);
  scores.economy+=(choice.effect.economy||0);
  scores.social+=(choice.effect.social||0);

  currentQuestionIndex++;
  const city=cities[currentCityIndex];
  if(currentQuestionIndex>=city.questions.length){
    currentCityIndex++;
    currentQuestionIndex=0;
    if(currentCityIndex>=cities.length){showResult();return;}
  }
  showQuestion();
}

function updateScores(){
  envScoreEl.textContent=scores.environment;
  ecoScoreEl.textContent=scores.economy;
  socScoreEl.textContent=scores.social;
}

function showResult(){
  questionScreen.classList.add('hidden');
  resultScreen.classList.remove('hidden');
  const total=(scores.environment+scores.economy+scores.social)/3;
  let type="";
  if(scores.environment>=scores.economy && scores.environment>=scores.social) type="ã‚¨ã‚³é‡è¦–éƒ½å¸‚";
  else if(scores.economy>=scores.environment && scores.economy>=scores.social) type="çµŒæ¸ˆé‡è¦–éƒ½å¸‚";
  else type="ç¤¾ä¼šé‡è¦–éƒ½å¸‚";
  resultText.textContent=`ğŸŒ¿:${scores.environment} ğŸ’°:${scores.economy} ğŸ¤:${scores.social} â†’ ã‚ãªãŸã®éƒ½å¸‚ã‚¿ã‚¤ãƒ—: ${type}`;
}
</script>

</body>
</html>
