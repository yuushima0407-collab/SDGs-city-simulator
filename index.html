<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDGs World Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ç”»é¢ç®¡ç† */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00b894, #00cec9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: #00cec9;
            box-shadow: 0 10px 25px rgba(0, 206, 201, 0.3);
        }

        .card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .card-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        /* éƒ½å¸‚å»ºè¨­ã‚°ãƒªãƒƒãƒ‰ */
        .city-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
        }

        .grid-cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grid-cell:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .grid-cell.built {
            background: rgba(0, 184, 148, 0.3);
        }

        /* ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤º */
        .resources-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .resource {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .resource-value {
            font-size: 1.5em;
            font-weight: bold;
            margin: 5px 0;
        }

        /* ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn {
            background: linear-gradient(45deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .nav-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: #00b894;
        }

        /* é€šçŸ¥ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 1000;
            animation: slideIn 0.5s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* é€²æ—ãƒãƒ¼ */
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #00cec9);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div id="startScreen" class="screen active">
            <div class="header">
                <h1>ğŸŒ SDGs World Builder</h1>
                <p>ä¸–ç•Œã®çŸ¥æµã‚’é›†ã‚ã¦ã€ç†æƒ³ã®æœªæ¥éƒ½å¸‚ã‚’ä½œã‚ã†ï¼</p>
            </div>
            <div style="text-align: center; margin-top: 50px;">
                <button class="btn" onclick="showScreen('countrySelect')">ğŸš€ ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã‚‹</button>
                <button class="btn btn-secondary" onclick="showScreen('tutorial')">ğŸ“š éŠã³æ–¹</button>
            </div>
        </div>

        <!-- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« -->
        <div id="tutorial" class="screen">
            <div class="header">
                <h1>ğŸ“š éŠã³æ–¹</h1>
            </div>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-icon">ğŸŒ</div>
                    <h3>1. ä¸–ç•Œã‚’æ¢æ¤œ</h3>
                    <p>å„å›½ã‚’è¨ªå•ã—ã¦SDGsã®æˆåŠŸäº‹ä¾‹ã‚’ç™ºè¦‹ã—ã‚ˆã†</p>
                </div>
                <div class="card">
                    <div class="card-icon">ğŸƒ</div>
                    <h3>2. ã‚«ãƒ¼ãƒ‰ã‚’åé›†</h3>
                    <p>ç™ºè¦‹ã—ãŸæŠ€è¡“ã‚„æ”¿ç­–ã‚’ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦é›†ã‚ã‚ˆã†</p>
                </div>
                <div class="card">
                    <div class="card-icon">ğŸ™ï¸</div>
                    <h3>3. éƒ½å¸‚ã‚’å»ºè¨­</h3>
                    <p>é›†ã‚ãŸã‚«ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ç†æƒ³ã®éƒ½å¸‚ã‚’ä½œã‚ã†</p>
                </div>
                <div class="card">
                    <div class="card-icon">âš–ï¸</div>
                    <h3>4. ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹</h3>
                    <p>ç’°å¢ƒãƒ»çµŒæ¸ˆãƒ»ç¤¾ä¼šã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒãˆã‚ˆã†</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showScreen('startScreen')">â† æˆ»ã‚‹</button>
                <button class="btn" onclick="showScreen('countrySelect')">ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã‚‹ â†’</button>
            </div>
        </div>

        <!-- å›½é¸æŠç”»é¢ -->
        <div id="countrySelect" class="screen">
            <div class="header">
                <h1>ğŸŒ è¨ªå•ã™ã‚‹å›½ã‚’é¸ã¼ã†</h1>
                <p>å„å›½ã§ç‹¬è‡ªã®SDGsè§£æ±ºç­–ã‚’ç™ºè¦‹ã§ãã¾ã™</p>
            </div>
            
            <div class="nav-tabs">
                <div class="nav-tab active" onclick="showContinent('asia')">ğŸŒ ã‚¢ã‚¸ã‚¢</div>
                <div class="nav-tab" onclick="showContinent('europe')">ğŸ° ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘</div>
                <div class="nav-tab" onclick="showContinent('africa')">ğŸ¦ ã‚¢ãƒ•ãƒªã‚«</div>
                <div class="nav-tab" onclick="showContinent('americas')">ğŸŒ ã‚¢ãƒ¡ãƒªã‚«</div>
            </div>

            <div class="cards-grid">
                <!-- ã‚¢ã‚¸ã‚¢ -->
                <div class="card continent-asia" onclick="selectCountry('japan')">
                    <div class="card-icon">ğŸ‡¯ğŸ‡µ</div>
                    <h3>æ—¥æœ¬</h3>
                    <p>ã”ã¿åˆ†åˆ¥ãƒ»ç½å®³å¯¾ç­–</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 30%"></div>
                    </div>
                    <small>ç™ºè¦‹ç‡: 30%</small>
                </div>
                <div class="card continent-asia" onclick="selectCountry('singapore')">
                    <div class="card-icon">ğŸ‡¸ğŸ‡¬</div>
                    <h3>ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«</h3>
                    <p>æ°´è³‡æºç®¡ç†ãƒ»éƒ½å¸‚è¨ˆç”»</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>æœªè¨ªå•</small>
                </div>

                <!-- ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ -->
                <div class="card continent-europe" style="display: none" onclick="selectCountry('germany')">
                    <div class="card-icon">ğŸ‡©ğŸ‡ª</div>
                    <h3>ãƒ‰ã‚¤ãƒ„</h3>
                    <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼è»¢æ›ãƒ»ãƒªã‚µã‚¤ã‚¯ãƒ«</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>æœªè¨ªå•</small>
                </div>
                <div class="card continent-europe" style="display: none" onclick="selectCountry('norway')">
                    <div class="card-icon">ğŸ‡³ğŸ‡´</div>
                    <h3>ãƒãƒ«ã‚¦ã‚§ãƒ¼</h3>
                    <p>é›»æ°—è‡ªå‹•è»Šãƒ»å†ç”Ÿã‚¨ãƒãƒ«ã‚®ãƒ¼</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>æœªè¨ªå•</small>
                </div>

                <!-- ã‚¢ãƒ•ãƒªã‚« -->
                <div class="card continent-africa" style="display: none" onclick="selectCountry('rwanda')">
                    <div class="card-icon">ğŸ‡·ğŸ‡¼</div>
                    <h3>ãƒ«ãƒ¯ãƒ³ãƒ€</h3>
                    <p>ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯ç¦æ­¢ãƒ»æ¸…æ½”æ”¿ç­–</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <small>æœªè¨ªå•</small>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showScreen('startScreen')">â† æˆ»ã‚‹</button>
                <button class="btn" onclick="showScreen('cityBuilder')">ğŸ™ï¸ éƒ½å¸‚ã‚’è¦‹ã‚‹</button>
            </div>
        </div>

        <!-- éƒ½å¸‚å»ºè¨­ç”»é¢ -->
        <div id="cityBuilder" class="screen">
            <div class="header">
                <h1>ğŸ™ï¸ ãƒã‚¤ã‚·ãƒ†ã‚£å»ºè¨­</h1>
                <p>åé›†ã—ãŸæŠ€è¡“ã§éƒ½å¸‚ã‚’ç™ºå±•ã•ã›ã‚ˆã†</p>
            </div>

            <!-- ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤º -->
            <div class="resources-bar">
                <div class="resource">
                    <div>ğŸ’°</div>
                    <div class="resource-value" id="money">1,000,000</div>
                    <div>äºˆç®—</div>
                </div>
                <div class="resource">
                    <div>ğŸŒ¿</div>
                    <div class="resource-value" id="environment">50%</div>
                    <div>ç’°å¢ƒæŒ‡æ¨™</div>
                </div>
                <div class="resource">
                    <div>ğŸ˜Š</div>
                    <div class="resource-value" id="happiness">65%</div>
                    <div>å¸‚æ°‘å¹¸ç¦åº¦</div>
                </div>
                <div class="resource">
                    <div>âš¡</div>
                    <div class="resource-value" id="energy">75%</div>
                    <div>ã‚¨ãƒãƒ«ã‚®ãƒ¼</div>
                </div>
            </div>

            <div class="nav-tabs">
                <div class="nav-tab active" onclick="showBuildTab('buildings')">ğŸ—ï¸ æ–½è¨­å»ºè¨­</div>
                <div class="nav-tab" onclick="showBuildTab('technologies')">ğŸ”¬ æŠ€è¡“å°å…¥</div>
                <div class="nav-tab" onclick="showBuildTab('policies')">ğŸ“œ æ”¿ç­–å®Ÿæ–½</div>
            </div>

            <!-- å»ºè¨­ã‚°ãƒªãƒƒãƒ‰ -->
            <div id="buildingsTab">
                <h3>æ–½è¨­ã‚’å»ºè¨­</h3>
                <div class="city-grid" id="cityGrid">
                    <!-- ã‚°ãƒªãƒƒãƒ‰ã¯JavaScriptã§ç”Ÿæˆ -->
                </div>
                
                <div class="cards-grid">
                    <div class="card" onclick="buildFacility('solar')">
                        <div class="card-icon">â˜€ï¸</div>
                        <h3>å¤ªé™½å…‰ç™ºé›»æ‰€</h3>
                        <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼+20% ç’°å¢ƒ+15%</p>
                        <p>ğŸ’° ã‚³ã‚¹ãƒˆ: 200,000</p>
                    </div>
                    <div class="card" onclick="buildFacility('recycling')">
                        <div class="card-icon">â™»ï¸</div>
                        <h3>ãƒªã‚µã‚¤ã‚¯ãƒ«æ–½è¨­</h3>
                        <p>ç’°å¢ƒ+25% é›‡ç”¨+50äºº</p>
                        <p>ğŸ’° ã‚³ã‚¹ãƒˆ: 150,000</p>
                    </div>
                    <div class="card" onclick="buildFacility('park')">
                        <div class="card-icon">ğŸŒ³</div>
                        <h3>éƒ½å¸‚å…¬åœ’</h3>
                        <p>å¹¸ç¦åº¦+15% ç’°å¢ƒ+10%</p>
                        <p>ğŸ’° ã‚³ã‚¹ãƒˆ: 100,000</p>
                    </div>
                </div>
            </div>

            <!-- æŠ€è¡“ã‚¿ãƒ– -->
            <div id="technologiesTab" style="display: none;">
                <h3>æŠ€è¡“ã‚’å°å…¥</h3>
                <div class="cards-grid">
                    <div class="card disabled">
                        <div class="card-icon">ğŸ‡¯ğŸ‡µ</div>
                        <h3>æ—¥æœ¬ã®ã”ã¿åˆ†åˆ¥</h3>
                        <p>ãƒªã‚µã‚¤ã‚¯ãƒ«ç‡+30%</p>
                        <p>ğŸ”“ æ—¥æœ¬ã‚’è¨ªå•ã™ã‚‹ã¨è§£æ”¾</p>
                    </div>
                    <div class="card disabled">
                        <div class="card-icon">ğŸ‡©ğŸ‡ª</div>
                        <h3>ãƒ‰ã‚¤ãƒ„ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼</h3>
                        <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼åŠ¹ç‡+40%</p>
                        <p>ğŸ”“ ãƒ‰ã‚¤ãƒ„ã‚’è¨ªå•ã™ã‚‹ã¨è§£æ”¾</p>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showScreen('countrySelect')">ğŸŒ å›½ã‚’æ¢æ¤œ</button>
                <button class="btn" onclick="nextTurn()">â­ï¸ æ¬¡ã®ã‚¿ãƒ¼ãƒ³</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        const gameState = {
            currentScreen: 'startScreen',
            resources: {
                money: 1000000,
                environment: 50,
                happiness: 65,
                energy: 75
            },
            discoveredCountries: ['japan'],
            builtFacilities: [],
            currentTurn: 1
        };

        // ç”»é¢è¡¨ç¤ºé–¢æ•°
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            gameState.currentScreen = screenId;
        }

        // å¤§é™¸è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function showContinent(continent) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.card').forEach(card => {
                card.style.display = 'none';
            });
            document.querySelectorAll('.continent-' + continent).forEach(card => {
                card.style.display = 'block';
            });
        }

        // å›½é¸æŠ
        function selectCountry(country) {
            if (!gameState.discoveredCountries.includes(country)) {
                gameState.discoveredCountries.push(country);
            }
            showNotification(`ğŸ‡¯ğŸ‡µ ${getCountryName(country)}ã‚’è¨ªå•ã—ã¾ã—ãŸï¼`);
            exploreCountry(country);
        }

        function getCountryName(countryCode) {
            const names = {
                'japan': 'æ—¥æœ¬',
                'singapore': 'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«', 
                'germany': 'ãƒ‰ã‚¤ãƒ„',
                'norway': 'ãƒãƒ«ã‚¦ã‚§ãƒ¼',
                'rwanda': 'ãƒ«ãƒ¯ãƒ³ãƒ€'
            };
            return names[countryCode] || countryCode;
        }

        // å›½æ¢æ¤œ
        function exploreCountry(country) {
            const discoveries = {
                'japan': 'æ—¥æœ¬ã®é«˜åº¦ãªã”ã¿åˆ†åˆ¥æŠ€è¡“ã‚’ç™ºè¦‹ï¼',
                'singapore': 'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ã®æ°´ãƒªã‚µã‚¤ã‚¯ãƒ«æŠ€è¡“ã‚’ç™ºè¦‹ï¼',
                'germany': 'ãƒ‰ã‚¤ãƒ„ã®å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼æ”¿ç­–ã‚’ç™ºè¦‹ï¼',
                'norway': 'ãƒãƒ«ã‚¦ã‚§ãƒ¼ã®é›»æ°—è‡ªå‹•è»Šæ™®åŠç­–ã‚’ç™ºè¦‹ï¼',
                'rwanda': 'ãƒ«ãƒ¯ãƒ³ãƒ€ã®ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯ç¦æ­¢æ”¿ç­–ã‚’ç™ºè¦‹ï¼'
            };
            
            showNotification(discoveries[country]);
            
            // é€²æ—ãƒãƒ¼æ›´æ–°
            const progressBar = document.querySelector(`.card[onclick="selectCountry('${country}')"] .progress-fill`);
            if (progressBar) {
                progressBar.style.width = '100%';
            }
        }

        // å»ºè¨­ã‚¿ãƒ–è¡¨ç¤º
        function showBuildTab(tab) {
            document.querySelectorAll('.nav-tab').forEach(navTab => {
                navTab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('buildingsTab').style.display = 'none';
            document.getElementById('technologiesTab').style.display = 'none';
            document.getElementById(tab + 'Tab').style.display = 'block';
        }

        // éƒ½å¸‚ã‚°ãƒªãƒƒãƒ‰åˆæœŸåŒ–
        function initializeCityGrid() {
            const grid = document.getElementById('cityGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                cell.innerHTML = 'ï¼‹';
                cell.onclick = () => selectGridCell(i);
                grid.appendChild(cell);
            }
        }

        let selectedCell = null;

        function selectGridCell(index) {
            document.querySelectorAll('.grid-cell').forEach(cell => {
                cell.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            
            const cell = document.querySelectorAll('.grid-cell')[index];
            cell.style.background = 'rgba(0, 206, 201, 0.3)';
            selectedCell = index;
        }

        // æ–½è¨­å»ºè¨­
        function buildFacility(type) {
            if (selectedCell === null) {
                showNotification('âŒ ã¾ãšå»ºè¨­å ´æ‰€ã‚’é¸ã‚“ã§ãã ã•ã„');
                return;
            }

            const facilities = {
                'solar': { cost: 200000, environment: 15, energy: 20, name: 'å¤ªé™½å…‰ç™ºé›»æ‰€' },
                'recycling': { cost: 150000, environment: 25, happiness: 5, name: 'ãƒªã‚µã‚¤ã‚¯ãƒ«æ–½è¨­' },
                'park': { cost: 100000, environment: 10, happiness: 15, name: 'éƒ½å¸‚å…¬åœ’' }
            };

            const facility = facilities[type];
            
            if (gameState.resources.money >= facility.cost) {
                gameState.resources.money -= facility.cost;
                gameState.resources.environment += facility.environment || 0;
                gameState.resources.happiness += facility.happiness || 0;
                gameState.resources.energy += facility.energy || 0;
                
                gameState.builtFacilities.push({
                    type: type,
                    cell: selectedCell,
                    name: facility.name
                });

                // ã‚°ãƒªãƒƒãƒ‰æ›´æ–°
                const cell = document.querySelectorAll('.grid-cell')[selectedCell];
                cell.classList.add('built');
                cell.innerHTML = getFacilityIcon(type);
                
                updateResourceDisplay();
                showNotification(`âœ… ${facility.name}ã‚’å»ºè¨­ã—ã¾ã—ãŸï¼`);
                
                selectedCell = null;
            } else {
                showNotification('âŒ äºˆç®—ãŒè¶³ã‚Šã¾ã›ã‚“');
            }
        }

        function getFacilityIcon(type) {
            const icons = {
                'solar': 'â˜€ï¸',
                'recycling': 'â™»ï¸',
                'park': 'ğŸŒ³'
            };
            return icons[type] || 'ğŸ¢';
        }

        // æ¬¡ã®ã‚¿ãƒ¼ãƒ³
        function nextTurn() {
            gameState.currentTurn++;
            gameState.resources.money += 50000; // ã‚¿ãƒ¼ãƒ³åå…¥
            
            // ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
            const events = [
                { message: 'ğŸŒ§ï¸ å¤§é›¨ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ç”Ÿç”£ãŒå¢—åŠ ', effect: { energy: 10 } },
                { message: 'ğŸ‰ å¸‚æ°‘ç¥­ã‚Šã§å¹¸ç¦åº¦ä¸Šæ˜‡', effect: { happiness: 5 } },
                { message: 'ğŸ“ˆ è¦³å…‰å®¢ãŒå¢—åŠ ', effect: { money: 100000 } }
            ];
            
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            showNotification(randomEvent.message);
            
            // åŠ¹æœé©ç”¨
            Object.keys(randomEvent.effect).forEach(resource => {
                gameState.resources[resource] += randomEvent.effect[resource];
            });
            
            updateResourceDisplay();
            showNotification(`â° ã‚¿ãƒ¼ãƒ³ ${gameState.currentTurn} é–‹å§‹`);
        }

        // ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤ºæ›´æ–°
        function updateResourceDisplay() {
            document.getElementById('money').textContent = gameState.resources.money.toLocaleString();
            document.getElementById('environment').textContent = Math.min(100, gameState.resources.environment) + '%';
            document.getElementById('happiness').textContent = Math.min(100, gameState.resources.happiness) + '%';
            document.getElementById('energy').textContent = Math.min(100, gameState.resources.energy) + '%';
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            initializeCityGrid();
            updateResourceDisplay();
        };
    </script>
</body>
</html>
